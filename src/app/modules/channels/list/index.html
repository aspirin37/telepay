<div class="container py-3">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="text-secondary mb-0">Мои каналы</h1>
        <router-link v-if="channels.length"
            class="btn btn-primary"
            :to="{ name: 'channels:create' }">Добавить канал</router-link>
    </div>
    <div class="flex-table mt-4"
        v-if="channels.length">
        <div class="header-row">
            <div class="col-1">
                Запросы
            </div>
            <div class="col-3">
                Канал
            </div>
            <div class="col">
                Описание
            </div>
            <div class="col">
                Подписчиков
            </div>
            <div class="col">
                ER
            </div>
            <div class="col">
                Статус
            </div>
        </div>
        <div class="body-row"
            v-for="ch in channels"
            :key="ch.channelId">
            <div class="col-1 p-2">
                <button class="btn btn-sm"
                    :class="ch.postOrdersCount > 0?'btn-success':'btn-light'"
                    @click="toggleOrders(ch)">{{ch.postOrdersCount||0}}</button>
            </div>
            <div class="col-3">
                <div class="form-row">
                    <div class="col-3">
                        <avatar :src="'/images/channels/'+ch.telegramId+'_'+ch.photoId+'.jpg'"
                            :circle="true" />
                    </div>
                    <div class="col-9">
                        <router-link :to="{name:ch.userId === user.userId?'channels:update':'channels:show',params:{id:ch.channelId}}">
                            <b>{{ch.title}}</b>
                        </router-link>
                        <br>{{ch.categories || 'Без категории'}}</div>
                </div>
            </div>
            <div class="col">{{(ch.description || "Нет описания") | cutLongStr}}</div>
            <div class="col h4 m-0">
                <telestat-link :channel="ch.username"
                    v-if="ch.subscriberCount>=300"
                    :text="$options.filters.cutSum(ch.subscriberCount)" />
                <span v-else>{{ch.subscriberCount}}</span>
            </div>
            <div class="col h4">
                {{ch.engagementRate}}%
            </div>
            <div class="col">
                {{ch.status}}
            </div>
            <div class="col-12"
                v-if="ch.showOrders">
                <div class="row">
                    <div class="col offset-1"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                </div>
            </div>
        </div>
    </div>
    <h4 class="text-center text-secondary"
        v-else>
        Вы еще не добавили ни одного канала
        <br>
        <router-link class="btn btn-primary my-3"
            :to="{ name: 'channels:create' }">Добавить канал</router-link>
    </h4>
</div>